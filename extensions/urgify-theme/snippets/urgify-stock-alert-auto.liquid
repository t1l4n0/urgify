{% comment %}
  Automatically renders the stock alert block near the add-to-cart form
  when the app is enabled. This avoids manual placement.
{% endcomment %}

{% liquid
  assign config = shop.metafields.urgify.stock_alert_config.value

  assign tracks_inventory = false
  for v in product.variants
    if v.inventory_management
      assign tracks_inventory = true
      break
    endif
  endfor
%}
<script type="application/json" id="urgify-variant-qty-auto">
{
{%- for v in product.variants -%}
  "{{ v.id }}": {{ v.inventory_quantity | default: 0 }}{% unless forloop.last %},{% endunless %}
{%- endfor -%}
}
</script>
<script src="{{ 'urgify-stock-alert.js' | asset_url }}" defer></script>