{% comment %}
  Global app embed: injects stock alert automatically on product pages
  when enabled via Urgify settings. No manual block placement required.
{% endcomment %}
{% liquid
  # Check subscription status first
  assign subscription_active = shop.metafields.urgify.subscription_active.value | default: false
  if subscription_active != true and subscription_active != 'true'
    # No active subscription, don't load anything
    assign should_load = false
  else
    assign should_load = true
  endif
  
  if should_load
    # Configuration loaded in individual snippets as needed
  endif
%}

{% unless should_load %}
  {%- comment -%} Subscription inactive â†’ render nothing on storefront {%- endcomment -%}
{% else %}
{{ 'urgify.min.css' | asset_url | stylesheet_tag }}
{{ 'urgify-stock-alert.css' | asset_url | stylesheet_tag }}
<script src="{{ 'urgify.js' | asset_url }}" defer></script>
<script src="{{ 'urgify-stock-alert.js' | asset_url }}" defer></script>
{% render 'urgify-stock-alert-auto' %}
{% render 'urgify-popup-auto' %}
{% endunless %}


